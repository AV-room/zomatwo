(this.webpackJsonpzomatwo=this.webpackJsonpzomatwo||[]).push([[0],{47:function(e,a,t){e.exports=t(81)},52:function(e,a,t){},54:function(e,a,t){},76:function(e,a,t){},77:function(e,a,t){},78:function(e,a,t){},81:function(e,a,t){"use strict";t.r(a);var n,c,r=t(0),l=t.n(r),i=t(25),s=t.n(i),u=(t(52),t(5)),o=t(93),b=t(95),m=t(10);t(54);!function(e){e.dining="dining",e.takeaway="takeaway",e.delivery="delivery",e.pubsBars="pubsBars",e.nightlife="nightlife"}(n||(n={})),function(e){e.cafe="cafe",e.coffee="coffee",e.pizza="pizza",e.fast="fast",e.asian="asian",e.bakery="bakery",e.italian="italian",e.sandwich="sandwich",e.chinese="chinese",e.pub="pub",e.egyptian="egyptian",e.bubbleTea="bubbleTea",e.other="other"}(c||(c={}));var d,f,p=t(22),h=t(42),v=t(21),g=t(11),E=t.n(g),j=t(23),O=t(30),y=t.n(O),k=t(4),w={categories:(d={},Object(k.a)(d,n.dining,2),Object(k.a)(d,n.takeaway,5),Object(k.a)(d,n.delivery,1),Object(k.a)(d,n.pubsBars,11),Object(k.a)(d,n.nightlife,3),d),cuisines:(f={},Object(k.a)(f,c.asian,3),Object(k.a)(f,c.bakery,5),Object(k.a)(f,c.cafe,1039),Object(k.a)(f,c.chinese,25),Object(k.a)(f,c.coffee,161),Object(k.a)(f,c.fast,40),Object(k.a)(f,c.italian,55),Object(k.a)(f,c.pizza,82),Object(k.a)(f,c.pub,983),Object(k.a)(f,c.sandwich,304),Object(k.a)(f,c.egyptian,146),Object(k.a)(f,c.bubbleTea,247),Object(k.a)(f,c.other,-1),f)},N=function(e,a){return a>=e[0]&&a<=e[1]},x=function(e){for(var a="",t=0;t<e;t++)a="".concat(a,"$");return a},C=function(){return new Promise((function(e,a){return setTimeout((function(){return a()}),2e4)}))},_=[0,500],S=[0,5],z="https://developers.zomato.com/api/v2.1",T="3bf73322184a4f70d9f4d634ec1c9fc2",B=function(){var e=Object(j.a)(E.a.mark((function e(){var a,t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/cuisines",a={url:"".concat(z).concat("/cuisines"),method:"get",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8","user-key":T},params:{city_id:297}},e.prev=2,e.next=5,Promise.race([y()(a),C()]);case 5:t=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:return n=t.data.cuisines.map((function(e){return e.cuisine.cuisine_id})),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(j.a)(E.a.mark((function e(a,t){var n,c,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(m.isEqual)(a.cost,_)&&(a.cost=null),Object(m.isEqual)(a.rating,S)&&(a.rating=null),n=P(a,_,S,t),e.prev=4,e.next=7,$(n);case 7:c=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(4),e.abrupt("return",null);case 13:return r=c.reduce((function(e,a){var t=a.data.restaurants.map((function(e){return e.restaurant}));return[].concat(Object(v.a)(e),Object(v.a)(t))}),[]),(a.cost||a.rating)&&(r=D(a,r)),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(a,t){return e.apply(this,arguments)}}(),P=function(e,a,t,n){var c,r;e.cost&&(c={type:"cost",order:A(e.cost,a)}),e.rating&&(r={type:"rating",order:A(e.rating,t)});var l=[];if(e.cost&&e.rating)l=[F(e,c,n),F(e,r,n)];else if(e.cost)l=[F(e,c,n)];else if(e.rating)l=[F(e,r,n)];else{l=[F(e,{type:"cost",order:"desc"},n)]}return l},F=function(e,a,t){var n=e.categories.map((function(e){return w.categories[e]})),r=e.cuisines.map((function(e){return e===c.other?t.join(","):w.cuisines[e]}));return{entity_type:"city",entity_id:297,category:n.join(),cuisines:r.join(),sort:a.type,order:a.order}},A=function(e,a){return Object(m.mean)(e)<Object(m.mean)(a)?"asc":"desc"},D=function(e,a){var t=Object(m.uniq)(a);return e.cost&&(t=t.filter((function(a){return N(e.cost,a.average_cost_for_two)}))),e.rating&&(t=t.filter((function(a){return N(e.rating,parseFloat(a.user_rating.aggregate_rating))}))),t},$=function(){var e=Object(j.a)(E.a.mark((function e(a){var t,n,c,r,l,i,s,u;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=20,n=[],c=Object(h.a)(a),e.prev=3,c.s();case 5:if((r=c.n()).done){e.next=21;break}l=r.value,i=0,s=null;case 9:if(0!==i){e.next=16;break}return e.next=12,q(Object(p.a)(Object(p.a)({},l),{},{start:i}));case 12:return u=e.sent,e.next=15,u.data.results_found;case 15:s=e.sent;case 16:n.push(q(Object(p.a)(Object(p.a)({},l),{},{start:i}))),i+=t;case 18:if(i<Math.min(s,100)){e.next=9;break}case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),c.e(e.t0);case 26:return e.prev=26,c.f(),e.finish(26);case 29:return e.next=31,Promise.race([Promise.all(n),C()]);case 31:return e.abrupt("return",e.sent);case 32:case"end":return e.stop()}}),e,null,[[3,23,26,29]])})));return function(a){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(E.a.mark((function e(a){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/search",t={url:"".concat(z).concat("/search"),method:"get",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8","user-key":T},params:a},e.abrupt("return",y()(t));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),L=t(12),I=t(13),J=(t(76),function(e){var a=e.list,t=e.handleSelection,n=Object(r.useState)(null),c=Object(u.a)(n,2),i=c[0],s=c[1];return l.a.createElement("div",{className:"results-list"},l.a.createElement("h2",null,"Results (",a.length,")"),l.a.createElement("ul",null,a.map((function(e,a){return l.a.createElement("li",{className:a===i?"selected":"",key:a,onClick:function(e){s(a),t(a)}},e.name,l.a.createElement("div",{className:"quick-bits"},l.a.createElement("span",null,e.cuisines)," ",l.a.createElement("br",null),l.a.createElement("span",null,l.a.createElement(L.a,{icon:I.c}),e.user_rating.aggregate_rating," |",x(e.price_range))))}))))}),R=(t(77),function(e){var a=e.restaurant,t=e.showDetails,n=e.handleSelectionClose,c=a?l.a.createElement("div",{className:"details-container"},l.a.createElement("button",{className:"close-details",onClick:n},"Close"),l.a.createElement("img",{className:"image",src:a.thumb||"placeholder.jpeg",onError:function(e){e.target.src="placeholder.jpeg"}}),l.a.createElement("div",{className:"text-content"},l.a.createElement("header",null,l.a.createElement("h2",{className:"title"},a.name),l.a.createElement("p",{className:"byline"},a.location.address)),l.a.createElement("ul",{className:"notables"},!a.has_table_booking&&l.a.createElement("li",null," ",l.a.createElement(L.a,{icon:I.d}),"No bookings"),Boolean(a.has_online_delivery)&&l.a.createElement("li",null,l.a.createElement(L.a,{icon:I.a}),"Delivery available")),l.a.createElement("dl",{className:"details"},l.a.createElement("dt",null,"Cuisines"),l.a.createElement("dd",null,a.cuisines),l.a.createElement("dt",null,"Phone number"),l.a.createElement("dd",null,a.phone_numbers),l.a.createElement("dt",null,"Opening hours"),l.a.createElement("dd",null,a.timings),l.a.createElement("dt",null,"Price"),l.a.createElement("dd",null,x(a.price_range)),l.a.createElement("dt",null,"Average rating"),l.a.createElement("dd",null,a.user_rating.aggregate_rating,"/5 "),l.a.createElement("dt",null,"Good to know"),l.a.createElement("dd",null,a.highlights.join(", "))))):l.a.createElement("p",null,"No restaurant selected");return l.a.createElement("div",{className:"results-details-container "+(t?"show":"")},c)}),U=(t(78),function(e){var a=function(a){var t=a.target.checked?[].concat(Object(v.a)(e.checkedVals),[a.target.name]):e.checkedVals.filter((function(e){return e!==a.target.name}));e.onChange(t)};return l.a.createElement("div",{className:"cb-container"},l.a.createElement("legend",null,e.label),l.a.createElement("div",{className:"input-container"},e.childLabelValues.map((function(t,n){return l.a.createElement("label",{key:n},l.a.createElement("input",{type:"checkbox",key:n,name:t.value,checked:e.checkedVals.includes(t.value),onChange:a}),t.label)}))))}),G=function(){var e=Object(r.useState)(!1),a=Object(u.a)(e,2),t=a[0],i=a[1],s=Object(r.useState)(!1),d=Object(u.a)(s,2),f=d[0],p=d[1],h=Object(r.useState)(!1),v=Object(u.a)(h,2),g=v[0],E=v[1],j=Object(r.useState)([]),O=Object(u.a)(j,2),y=O[0],k=O[1],N=Object(r.useState)([]),x=Object(u.a)(N,2),C=x[0],z=x[1],T=Object(r.useState)([]),P=Object(u.a)(T,2),F=P[0],A=P[1],D=Object(r.useState)([]),$=Object(u.a)(D,2),q=$[0],G=$[1],M=Object(r.useState)([0,5]),W=Object(u.a)(M,2),H=W[0],K=W[1],Q=Object(r.useState)([0,500]),X=Object(u.a)(Q,2),Y=X[0],Z=X[1],ee=Object(r.useState)(null),ae=Object(u.a)(ee,2),te=ae[0],ne=ae[1],ce=Object(r.useState)(!1),re=Object(u.a)(ce,2),le=re[0],ie=re[1];Object(r.useEffect)((function(){p(!0),B().then((function(e){e?G(e.filter((function(e){return!Object.values(w.cuisines).includes(e)}))):E(!0),p(!1)}))}),[]),Object(r.useEffect)((function(){window.addEventListener("resize",(function(){window.innerWidth>890&&t&&i(!1)}))}),[]),Object(r.useEffect)((function(){p(!0),V({categories:C,cuisines:F,cost:Y,rating:H},q).then((function(e){e?k(e):(E(!0),k([])),p(!1)}))}),[C,F,Y,H]);var se=[{label:"Dining",value:n.dining},{label:"Take-Away",value:n.takeaway},{label:"Delivery",value:n.delivery},{label:"Pubs & Bars",value:n.pubsBars},{label:"Nightlife",value:n.nightlife}],ue=[{label:"Cafe Food",value:c.cafe},{label:"Coffee and Tea",value:c.coffee},{label:"Pizza",value:c.pizza},{label:"Fast Food",value:c.fast},{label:"Asian",value:c.asian},{label:"Bakery",value:c.bakery},{label:"Italian",value:c.italian},{label:"Sandwich",value:c.sandwich},{label:"Chinese",value:c.chinese},{label:"Pub Food",value:c.pub},{label:"Bubble Tea",value:c.bubbleTea},{label:"Other",value:c.other}],oe=[{value:S[0],label:"0"},{value:S[1],label:"5"}],be=[{value:_[0],label:"$"},{value:_[1],label:"$$$$"}],me=function(){C.length>0&&z([]),F.length>0&&A([]),Object(m.isEqual)(Y,_)||Z(_),Object(m.isEqual)(H,S)||K(S)};return l.a.createElement("div",{className:"container"},g&&l.a.createElement("h2",{className:"error"},"There has been an error.",l.a.createElement("button",{className:"closebtn",onClick:function(e){E(!1),k([]),me()}},l.a.createElement("span",{className:"fa-layers fa-fw"},l.a.createElement(L.a,{icon:I.b,size:"lg",color:"#f44336"}),l.a.createElement(L.a,{icon:I.d,size:"lg",color:"white"})))),l.a.createElement("button",{className:"show-filters",onClick:function(e){i(!t)}},"Filter"),l.a.createElement("div",{className:"filter-panel "+(t?"show":"")},l.a.createElement("div",{className:"checkbox-groups"},l.a.createElement(U,{name:"category",label:"Category",childLabelValues:se,checkedVals:C,onChange:function(e){z(e)}}),l.a.createElement(U,{name:"cuisine",label:"Cuisine",childLabelValues:ue,checkedVals:F,onChange:function(e){A(e)}})),l.a.createElement("div",{className:"sliders"},l.a.createElement("div",{className:"slider"},l.a.createElement(o.a,{id:"rating-range-slider",gutterBottom:!0},"Rating"),l.a.createElement(b.a,{value:H,onChange:function(e,a){K(a)},valueLabelDisplay:"auto","aria-labelledby":"rating-range-slider",getAriaValueText:function(e){return e},min:S[0],max:S[1],step:.1,marks:oe})),l.a.createElement("div",{className:"slider"},l.a.createElement(o.a,{id:"cost-range-slider",gutterBottom:!0},"Cost"),l.a.createElement(b.a,{value:Y,onChange:function(e,a){Z(a)},valueLabelDisplay:"auto","aria-labelledby":"cost-range-slider",getAriaValueText:function(e){return"$".concat(e)},min:_[0],max:_[1],step:10,marks:be})))),l.a.createElement("div",{className:"results-panel"},f&&l.a.createElement("div",{className:"spinner"},l.a.createElement("div",{className:"double-bounce1"}),l.a.createElement("div",{className:"double-bounce2"})),!f&&y&&l.a.createElement("div",{className:"list-and-details"},l.a.createElement(J,{list:y,handleSelection:function(e){ne(e),ie(!0)}}),l.a.createElement(R,{restaurant:y[te],showDetails:le,handleSelectionClose:function(){ie(!1)}}))))};s.a.render(l.a.createElement(G,null),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.fe7a2bea.chunk.js.map